
# 概述
在web功能设计中,很多时候我们会要将需要访问的文件定义成变量，从而让前端的功能便的更加灵活。当用户发起一个前端的请求时，便会将请求的这个文件的值(比如文件名称)传递到后台，后台再执行其对应的文件在这个过程中，如果后台没有对前端传进来的值进行严格的安全考虑，则攻击者可能会通过“../”这样的手段让后台打开或者执行一些其他的文件。从而导致后台服务器上其他目录的文件结果被遍历出来，形成目录遍历漏洞。

看到这里,你可能会觉得目录遍历漏洞和不安全的文件下载，甚至文件包含漏洞有差不多的意思，是的，目录遍历漏洞形成的最主要的原因跟这两者一样，都是在功能设计中将要操作的文件使用变量的方式传递给了后台，而又没有进行严格的安全考虑而造成的，只是出现的位置所展现的现象不一样，因此，这里还是单独拿出来定义一下。

需要区分一下的是,如果你通过不带参数的url（比如：http://xxxx/doc）列出了doc文件夹里面所有的文件，这种情况，我们成为敏感信息泄露。而并不归为目录遍历漏洞。


# 目录遍历

## 查看关键代码
```php
$html='';
if(isset($_GET['title'])){
    $filename=$_GET['title'];
    //这里直接把传进来的内容进行了require(),造成问题
    require "soup/$filename";
//    echo $html;
}
```

通过代码可以看到直接将变量$filename进行了require(),造成问题。


## 函数说明
```
isset() 函数用于检测变量是否已设置并且非 NULL。如果指定变量存在且不为 NULL，则返回 TRUE，否则返回 FALSE

语法
bool isset ( mixed $var [, mixed $... ] )
$var：要检测的变量。
```

```
require() 文件包含函数
```


## 实战
点击we're jarheads，可以看到URL产生了变化<br />![image-20210715143819259.png](_img/assets/1655881573997-0a7ec387-4f22-400d-b639-da01bf9d762f.png)

我们将`dir_list.php?title=jarheads.php`删除进行访问即可看见文件目录<br />![image-20210715144105342.png](_img/assets/1655881578576-60595080-6512-4f08-a43c-097633b73a97.png)

加上../即可看见pikachu靶场所有文件目录<br />![image-20210715144037225.png](_img/assets/1655881583242-5940be32-f0d8-4f6b-8f59-1a2f08abc19c.png)
