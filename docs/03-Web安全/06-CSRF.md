CSRF (Cross-site request forgery,跨站请求伪造)也被称为One Click Attack或者Session Riding, 通常缩写为CSRF或者XSRF,是一种对网站的恶意利用。尽管听起来像跨站脚本(XSS)，但它与XSS非常不同，XSS利用站点内的信任用户，而CSRF则通过伪装成受信任用户请求受信任的网站。

	**CSRF攻击**:攻击者利用目标用户的身份，以目标用户的名义执行某些非法操作。CSRF能够做的事情包括:以目标用户的名义发送邮件、发消息，盗取目标用户的账号，甚至购买商品、虚拟货币转账，这会泄露个人隐私并威胁到了目标用户的财产安全。

CSRF攻击的前提条件：

- 目标用户已经登录了网站，能够执行网站的功能。
- 目标用户访问了攻击者构造的URL。

例1：当你登录了网上银行，正在进行转账业务，这时你的某个QQ好友(攻击者)发来一条消息(URL)，这条消息是攻击者精心构造的转账业务代码，而且与你所登录的是同一家网络银行，你可能认为这个网站是安全的，然而当你打开了这条URL后，你账户中的余额可能会全部丢失。

靶场地址：[pikachu-SCRF(跨站请求伪造)](/docs/bc/bc-1d84ts90bppqd)


# CSRF修复建议

- 验证请求的Referer值，如果Referer是以自己的网站开头的域名，则说明该请求来自网站自己，是合法的。如果Referer是其他网站域名或空白，就有可能是CSRF攻击，那么服务器应拒绝该请求,但是此方法存在被绕过的可能。
- 在调用某些功能时进行二次验证，如:删除用户时，产生一个提示对话框，提示“确定删除用户吗?”。转账操作时，要求用户输入二次密码。设置验证码，在进行敏感操作时输入验证码。
- CSRF攻击之所以能够成功，是因为攻击者可以伪造用户的请求，由此可知，抵御CSRF攻击的关键在于:在请求中放入攻击者不能伪造的信息。例如可以在HTTP请求中以参数的形式加入一个随机产生的token,并在服务器端验证token,如果请求中没有token或者token的内容不正确，则认为该请求可能是CSRF攻击从而拒绝该请求。
